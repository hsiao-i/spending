import{i as f}from"./http-b3c12b6b.js";import{d as b,l as g,e as v,f as s,h as a,w as h,S as d,r as i,o as w,n as m,an as V}from"./index-d6314024.js";const E={class:"container"},y={class:"w-md-50 w-100 shadow bg-light mx-auto p-4 rounded-5 min-vh-80"},k=s("h2",{class:"text-center"},"登入",-1),x={class:"mb-3"},C=s("label",{for:"Email",class:"form-label"},"Email",-1),S={class:"mb-3"},B=s("label",{for:"密碼",class:"form-label"},"密碼",-1),F=["disabled"],M=b({__name:"LoginPage",setup(L){const u=V(),o=g({email:"",password:""}),_=async()=>{try{const t="/login",e=await f.post(t,o.value);localStorage.setItem("userId",e.data.user.id),sessionStorage.setItem("isLogin","true"),document.cookie=`spendingToken=${e.data.accessToken}`,d.fire({icon:"success",title:"成功登入",confirmButtonColor:"#7fbcd2"}),u.push("/spending")}catch{d.fire({icon:"error",title:"請確認帳號或密碼是否正確"})}};return(t,e)=>{const r=i("VField"),c=i("ErrorMessage"),p=i("VForm");return w(),v("div",E,[s("div",y,[k,a(p,{onSubmit:_},{default:h(({errors:l})=>[s("div",x,[C,a(r,{type:"mail",class:m(["form-control",{"is-invalid":l.Email}]),id:"Email",name:"Email",placeholder:"請輸入 Email",rules:"email|required",modelValue:o.value.email,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.email=n)},null,8,["class","modelValue"]),a(c,{name:"Email",class:"invalid-feedback"})]),s("div",S,[B,a(r,{type:"password",class:m(["form-control",{"is-invalid":l.密碼}]),id:"密碼",name:"密碼",placeholder:"請輸入密碼",rules:"required|min:8",modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.password=n)},null,8,["class","modelValue"]),a(c,{name:"密碼",class:"invalid-feedback"})]),s("button",{type:"submit",class:"btn btn-primary w-100",disabled:Object.keys(l).length>0}," 送出 ",8,F)]),_:1})])])}}});export{M as default};
