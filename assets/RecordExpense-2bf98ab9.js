import{M as X}from"./ModalShare-d6c45fef.js";import{_ as Z,o as l,e as c,k as Q,l as V,S as E,d as j,b as P,t as Y,f as e,h as i,w as g,m as S,v as C,u as o,n as D,F as I,p as B,q as r,r as w,i as T,s as z,x as L,c as H}from"./index-d6314024.js";import{i as N}from"./http-b3c12b6b.js";import{u as J,a as ee}from"./useCalculateStore-16c10f28.js";import{v as K}from"./v4-a960c1f4.js";const te={};function oe(b,v){return l(),c("div",null," multiple ")}const se=Z(te,[["render",oe]]),W=Q("category",()=>{const b=V([]),v="/expenseCategories",y=async()=>{try{const s=await N.get(v);b.value=s.data}catch{E.fire({icon:"error",title:"錯誤，請聯繫管理員"})}},f=V([]),m="/incomeCategories";return{categoryIcon:b,getExpenseCategories:y,categoryIncome:f,getIncomeCategories:async()=>{try{const s=await N.get(m);f.value=s.data}catch{E.fire({icon:"error",title:"錯誤，請聯繫管理員"})}}}}),G=Q("personalBank",()=>{const b=V([]),y=`/personalBankAccounts?userId=${localStorage.getItem("userId")}&_expand=bank`;return{personalBankAccountList:b,getBankAccountList:async()=>{try{const m=await N.get(y);b.value=m.data}catch{E.fire({icon:"error",title:"錯誤，請聯繫管理員"})}}}}),ne={name:"single-record",class:"tab-content px-4",id:"expenseTabContent"},ae={class:"tab-pane fade show active",id:"tabExpense",role:"tabpanel","aria-labelledby":"home-tab"},le={class:"mb-3"},de=e("label",{for:"recordInputDate",class:"form-label"},"日期",-1),ce={class:"mb-3"},ie=e("label",{for:"銀行帳戶",class:"form-label"},"銀行帳戶",-1),re=e("option",{value:"",disabled:"",selected:""},"請選擇使用的銀行帳戶",-1),ue=["value"],me={class:"mb-3"},pe=e("label",{for:"類別",class:"form-label"},"類別",-1),_e=e("option",{value:"",disabled:"",selected:""},"請選擇類別",-1),be=["value"],he={class:"mb-3 row"},ve={class:"col-8"},fe=e("label",{for:"recordInputName",class:"form-label"},"名稱",-1),ye={class:"col-4"},ge=e("label",{for:"金額",class:"form-label"},"金額",-1),xe={class:"mb-3"},$e=e("label",{for:"recordTextarea",class:"form-label"},"備註",-1),Ie={class:"py-4"},ke=["disabled"],Ve={class:"tab-pane fade",id:"tabIncome",role:"tabpanel","aria-labelledby":"profile-tab"},Se={class:"mb-3"},Ce=e("label",{for:"recordInputDate",class:"form-label"},"日期",-1),De={class:"mb-3"},Be=e("label",{for:"銀行帳戶",class:"form-label"},"銀行帳戶",-1),Ee=e("option",{value:"",disabled:"",selected:""},"請選擇使用的銀行帳戶",-1),we=["value"],Me={class:"mb-3"},Ue=e("label",{for:"類別",class:"form-label"},"類別",-1),Te=e("option",{value:"",disabled:"",selected:""},"請選擇類別",-1),Ae=["value"],Fe={class:"mb-3 row"},Ne={class:"col-8"},Oe=e("label",{for:"recordInputName",class:"form-label"},"名稱",-1),qe={class:"col-4"},Le=e("label",{for:"金額",class:"form-label"},"金額",-1),He={class:"mb-3"},Pe=e("label",{for:"recordTextarea",class:"form-label"},"備註",-1),je={class:"py-4"},Je=["disabled"],Re=j({__name:"SingleSpending",props:{updateExpense:null},emits:["closeModal"],setup(b,{emit:v}){const y=b,f=W(),m=G(),n=J();P(()=>{f.getExpenseCategories(),f.getIncomeCategories(),m.getBankAccountList()});const{updateExpense:s}=Y(y),x=()=>{s.value.date=new Date().toISOString().slice(0,10)};P(()=>{x(),n.formatDate()});const $=V(),M=V(),U=async()=>{try{const d=localStorage.getItem("userId");s.value.userId=d;const a="/expenses";await N.post(a,s.value),E.fire({icon:"success",title:"成功記錄",confirmButtonColor:"#7fbcd2"}),v("closeModal"),$.value.resetForm(),n.getExpense()}catch{E.fire({icon:"error",title:"失敗，請再次操作或連繫管理員",confirmButtonColor:"#cb7d56"})}};return(d,a)=>{const h=w("VField"),k=w("ErrorMessage"),A=w("VForm");return l(),c("div",ne,[e("div",ae,[i(A,{onSubmit:U,ref_key:"expenseForm",ref:$},{default:g(({errors:p})=>[e("div",le,[de,S(e("input",{type:"date",class:"form-control",id:"recordInputDate","aria-describedby":"dateHelp","onUpdate:modelValue":a[0]||(a[0]=t=>o(s).date=t)},null,512),[[C,o(s).date]])]),e("div",ce,[ie,i(h,{name:"銀行帳戶",id:"recordExpenseBank",placeholder:"請選擇使用的銀行帳戶",class:D(["form-select",{"is-invalid":p.銀行帳戶}]),rules:"required",as:"select",modelValue:o(s).personalBankAccountId,"onUpdate:modelValue":a[1]||(a[1]=t=>o(s).personalBankAccountId=t)},{default:g(()=>[re,(l(!0),c(I,null,B(o(m).personalBankAccountList,t=>{var u;return l(),c("option",{key:t.id,value:t.id},r((u=t.bank)==null?void 0:u.name),9,ue)}),128))]),_:2},1032,["class","modelValue"]),i(k,{name:"銀行帳戶",class:"invalid-feedback"})]),e("div",me,[pe,i(h,{name:"類別",id:"recordExpenseCategory",placeholder:"請選擇類別",class:D(["form-select",{"is-invalid":p.類別}]),rules:"required",as:"select",modelValue:o(s).expenseCategoryId,"onUpdate:modelValue":a[2]||(a[2]=t=>o(s).expenseCategoryId=t)},{default:g(()=>[_e,(l(!0),c(I,null,B(o(f).categoryIcon,t=>(l(),c("option",{value:t.id,key:t.id},r(t.name),9,be))),128))]),_:2},1032,["class","modelValue"]),i(k,{name:"類別",class:"invalid-feedback"})]),e("div",he,[e("div",ve,[fe,S(e("input",{type:"text",class:"form-control",id:"recordInputName","aria-describedby":"nameHelp",placeholder:"請輸入名稱","onUpdate:modelValue":a[3]||(a[3]=t=>o(s).name=t)},null,512),[[C,o(s).name]])]),e("div",ye,[ge,i(h,{type:"number",class:D(["form-control",{"is-invalid":p.金額}]),name:"金額",id:"recordInputPrice",placeholder:"輸入金額",rules:"required",modelValue:o(s).amount,"onUpdate:modelValue":a[4]||(a[4]=t=>o(s).amount=t)},null,8,["class","modelValue"]),i(k,{name:"金額",class:"invalid-feedback"})])]),e("div",xe,[$e,S(e("textarea",{class:"form-control",placeholder:"備註",id:"recordTextarea",style:{height:"100px"},"onUpdate:modelValue":a[5]||(a[5]=t=>o(s).description=t)},null,512),[[C,o(s).description]])]),e("div",Ie,[e("button",{type:"submit",class:"btn btn-primary w-100",disabled:Object.keys(p).length>0},"儲存",8,ke)])]),_:1},512)]),e("div",Ve,[i(A,{onSubmit:o(n).updateIncomeInfo,ref_key:"incomeForm",ref:M},{default:g(({errors:p})=>[e("div",Se,[Ce,S(e("input",{type:"date",class:"form-control",id:"recordInputDate","aria-describedby":"dateHelp","onUpdate:modelValue":a[6]||(a[6]=t=>o(n).updateIncomeData.date=t)},null,512),[[C,o(n).updateIncomeData.date]])]),e("div",De,[Be,i(h,{name:"銀行帳戶",id:"recordExpenseBank",placeholder:"請選擇使用的銀行帳戶",class:D(["form-select",{"is-invalid":p.銀行帳戶}]),rules:"required",as:"select",modelValue:o(n).updateIncomeData.personalBankAccountId,"onUpdate:modelValue":a[7]||(a[7]=t=>o(n).updateIncomeData.personalBankAccountId=t)},{default:g(()=>[Ee,(l(!0),c(I,null,B(o(m).personalBankAccountList,t=>{var u;return l(),c("option",{key:t.id,value:t.id},r((u=t.bank)==null?void 0:u.name),9,we)}),128))]),_:2},1032,["class","modelValue"]),i(k,{name:"銀行帳戶",class:"invalid-feedback"})]),e("div",Me,[Ue,i(h,{name:"類別",id:"recordExpenseCategory",placeholder:"請選擇類別",class:D(["form-select",{"is-invalid":p.類別}]),rules:"required",as:"select",modelValue:o(n).updateIncomeData.incomeCategoryId,"onUpdate:modelValue":a[8]||(a[8]=t=>o(n).updateIncomeData.incomeCategoryId=t)},{default:g(()=>[Te,(l(!0),c(I,null,B(o(f).categoryIncome,t=>(l(),c("option",{value:t.id,key:t.id},r(t.name),9,Ae))),128))]),_:2},1032,["class","modelValue"]),i(k,{name:"類別",class:"invalid-feedback"})]),e("div",Fe,[e("div",Ne,[Oe,S(e("input",{type:"text",class:"form-control",id:"recordInputName","aria-describedby":"nameHelp",placeholder:"請輸入名稱","onUpdate:modelValue":a[9]||(a[9]=t=>o(n).updateIncomeData.name=t)},null,512),[[C,o(n).updateIncomeData.name]])]),e("div",qe,[Le,i(h,{type:"number",class:D(["form-control",{"is-invalid":p.金額}]),name:"金額",id:"recordInputPrice",placeholder:"輸入金額",rules:"required",modelValue:o(n).updateIncomeData.amount,"onUpdate:modelValue":a[10]||(a[10]=t=>o(n).updateIncomeData.amount=t)},null,8,["class","modelValue"]),i(k,{name:"金額",class:"invalid-feedback"})])]),e("div",He,[Pe,S(e("textarea",{class:"form-control",placeholder:"備註",id:"recordTextarea",style:{height:"100px"},"onUpdate:modelValue":a[11]||(a[11]=t=>o(n).updateIncomeData.description=t)},null,512),[[C,o(n).updateIncomeData.description]])]),e("div",je,[e("button",{type:"submit",class:"btn btn-primary w-100",disabled:Object.keys(p).length>0},"儲存",8,Je)])]),_:1},8,["onSubmit"])])])}}}),ze={class:"p-4"},Ye=e("div",{class:"text-end mb-3"},[e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ge=e("h3",{class:"h4 mb-3"},"編輯紀錄",-1),Ke={class:"mb-3"},Qe=e("label",{for:"recordInputDate",class:"form-label"},"日期",-1),We={class:"mb-3"},Xe=e("label",{for:"銀行帳戶",class:"form-label"},"銀行帳戶",-1),Ze=e("option",{value:"",disabled:"",selected:""},"請選擇使用的銀行帳戶",-1),et=["value"],tt={class:"mb-3"},ot=e("label",{for:"類別",class:"form-label"},"類別",-1),st=e("option",{value:"",disabled:"",selected:""},"請選擇類別",-1),nt=["value"],at={class:"mb-3 row"},lt={class:"col-8"},dt=e("label",{for:"recordInputName",class:"form-label"},"名稱",-1),ct={class:"col-4"},it=e("label",{for:"金額",class:"form-label"},"金額",-1),rt={class:"mb-3"},ut=e("label",{for:"recordTextarea",class:"form-label"},"備註",-1),mt={class:"py-4"},pt=["disabled"],_t={class:"mb-3"},bt=e("label",{for:"recordInputDate",class:"form-label"},"日期",-1),ht={class:"mb-3"},vt=e("label",{for:"銀行帳戶",class:"form-label"},"銀行帳戶",-1),ft=e("option",{value:"",disabled:"",selected:""},"請選擇使用的銀行帳戶",-1),yt=["value"],gt={class:"mb-3"},xt=e("label",{for:"類別",class:"form-label"},"類別",-1),$t=e("option",{value:"",disabled:"",selected:""},"請選擇類別",-1),It=["value"],kt={class:"mb-3 row"},Vt={class:"col-8"},St=e("label",{for:"recordInputName",class:"form-label"},"名稱",-1),Ct={class:"col-4"},Dt=e("label",{for:"金額",class:"form-label"},"金額",-1),Bt={class:"mb-3"},Et=e("label",{for:"recordTextarea",class:"form-label"},"備註",-1),wt={class:"py-4"},Mt=["disabled"],Ut=j({__name:"EditSpending",props:{updateExpense:null,expenseOrIncome:null},emits:["closeModal"],setup(b,{emit:v}){const y=b,f=G(),m=W(),n=J();P(()=>{f.getBankAccountList(),m.getExpenseCategories(),m.getIncomeCategories()});const{updateExpense:s}=Y(y),x=V(),$=async()=>{try{const U=localStorage.getItem("userId");s.value.userId=U;const d=`/expenses/${s.value.id}`;await N.put(d,s.value),E.fire({icon:"success",title:"成功更新",confirmButtonColor:"#7fbcd2"}),v("closeModal"),x.value.resetForm(),n.getExpense()}catch{E.fire({icon:"error",title:"失敗，請再次操作或連繫管理員",confirmButtonColor:"#cb7d56"})}},M=()=>{n.requestState="edit",n.updateIncomeInfo(),x.value.resetForm(),v("closeModal")};return(U,d)=>{const a=w("VField"),h=w("ErrorMessage"),k=w("VForm"),A=w("Form");return l(),c("div",ze,[Ye,Ge,b.expenseOrIncome==="expense"?(l(),c(I,{key:0},[T(r(b.expenseOrIncome)+" ",1),i(k,{onSubmit:$,ref_key:"spendingEditForm",ref:x},{default:g(({errors:p})=>[e("div",Ke,[Qe,S(e("input",{type:"date",class:"form-control",id:"recordInputDate","aria-describedby":"dateHelp","onUpdate:modelValue":d[0]||(d[0]=t=>o(s).date=t)},null,512),[[C,o(s).date]])]),e("div",We,[Xe,i(a,{name:"銀行帳戶",id:"recordExpenseBank",placeholder:"請選擇使用的銀行帳戶",class:D(["form-select",{"is-invalid":p.銀行帳戶}]),rules:"required",as:"select",modelValue:o(s).personalBankAccountId,"onUpdate:modelValue":d[1]||(d[1]=t=>o(s).personalBankAccountId=t)},{default:g(()=>[Ze,(l(!0),c(I,null,B(o(f).personalBankAccountList,t=>{var u;return l(),c("option",{key:t.id,value:t.id},r((u=t.bank)==null?void 0:u.name),9,et)}),128))]),_:2},1032,["class","modelValue"]),i(h,{name:"銀行帳戶",class:"invalid-feedback"})]),e("div",tt,[ot,i(a,{name:"類別",id:"recordExpenseCategory",placeholder:"請選擇類別",class:D(["form-select",{"is-invalid":p.類別}]),rules:"required",as:"select",modelValue:o(s).expenseCategoryId,"onUpdate:modelValue":d[2]||(d[2]=t=>o(s).expenseCategoryId=t)},{default:g(()=>[st,(l(!0),c(I,null,B(o(m).categoryIcon,t=>(l(),c("option",{value:t.id,key:t.id},r(t.name),9,nt))),128))]),_:2},1032,["class","modelValue"]),i(h,{name:"類別",class:"invalid-feedback"})]),e("div",at,[e("div",lt,[dt,S(e("input",{type:"text",class:"form-control",id:"recordInputName","aria-describedby":"nameHelp",placeholder:"請輸入名稱","onUpdate:modelValue":d[3]||(d[3]=t=>o(s).name=t)},null,512),[[C,o(s).name]])]),e("div",ct,[it,i(a,{type:"number",class:D(["form-control",{"is-invalid":p.金額}]),name:"金額",id:"recordInputPrice",placeholder:"輸入金額",rules:"required",modelValue:o(s).amount,"onUpdate:modelValue":d[4]||(d[4]=t=>o(s).amount=t)},null,8,["class","modelValue"]),i(h,{name:"金額",class:"invalid-feedback"})])]),e("div",rt,[ut,S(e("textarea",{class:"form-control",placeholder:"備註",id:"recordTextarea",style:{height:"100px"},"onUpdate:modelValue":d[5]||(d[5]=t=>o(s).description=t)},null,512),[[C,o(s).description]])]),e("div",mt,[e("button",{type:"submit",class:"btn btn-primary w-100",disabled:Object.keys(p).length>0},"儲存",8,pt)])]),_:1},512)],64)):b.expenseOrIncome==="income"?(l(),c(I,{key:1},[T(r(b.expenseOrIncome)+" ",1),i(A,{onSubmit:M,ref_key:"spendingEditForm",ref:x},{default:g(({errors:p})=>[e("div",_t,[bt,S(e("input",{type:"date",class:"form-control",id:"recordInputDate","aria-describedby":"dateHelp","onUpdate:modelValue":d[6]||(d[6]=t=>o(n).updateIncomeData.date=t)},null,512),[[C,o(n).updateIncomeData.date]])]),e("div",ht,[vt,i(a,{name:"銀行帳戶",id:"recordExpenseBank",placeholder:"請選擇使用的銀行帳戶",class:D(["form-select",{"is-invalid":p.銀行帳戶}]),rules:"required",as:"select",modelValue:o(n).updateIncomeData.personalBankAccountId,"onUpdate:modelValue":d[7]||(d[7]=t=>o(n).updateIncomeData.personalBankAccountId=t)},{default:g(()=>[ft,(l(!0),c(I,null,B(o(f).personalBankAccountList,t=>{var u;return l(),c("option",{key:t.id,value:t.id},r((u=t.bank)==null?void 0:u.name),9,yt)}),128))]),_:2},1032,["class","modelValue"]),i(h,{name:"銀行帳戶",class:"invalid-feedback"})]),e("div",gt,[xt,i(a,{name:"類別",id:"recordExpenseCategory",placeholder:"請選擇類別",class:D(["form-select",{"is-invalid":p.類別}]),rules:"required",as:"select",modelValue:o(n).updateIncomeData.incomeCategoryId,"onUpdate:modelValue":d[8]||(d[8]=t=>o(n).updateIncomeData.incomeCategoryId=t)},{default:g(()=>[$t,(l(!0),c(I,null,B(o(m).categoryIncome,t=>(l(),c("option",{value:t.id,key:t.id},r(t.name),9,It))),128))]),_:2},1032,["class","modelValue"]),i(h,{name:"類別",class:"invalid-feedback"})]),e("div",kt,[e("div",Vt,[St,S(e("input",{type:"text",class:"form-control",id:"recordInputName","aria-describedby":"nameHelp",placeholder:"請輸入名稱","onUpdate:modelValue":d[9]||(d[9]=t=>o(n).updateIncomeData.name=t)},null,512),[[C,o(n).updateIncomeData.name]])]),e("div",Ct,[Dt,i(a,{type:"number",class:D(["form-control",{"is-invalid":p.金額}]),name:"金額",id:"recordInputPrice",placeholder:"輸入金額",rules:"required",modelValue:o(n).updateIncomeData.amount,"onUpdate:modelValue":d[10]||(d[10]=t=>o(n).updateIncomeData.amount=t)},null,8,["class","modelValue"]),i(h,{name:"金額",class:"invalid-feedback"})])]),e("div",Bt,[Et,S(e("textarea",{class:"form-control",placeholder:"備註",id:"recordTextarea",style:{height:"100px"},"onUpdate:modelValue":d[11]||(d[11]=t=>o(n).updateIncomeData.description=t)},null,512),[[C,o(n).updateIncomeData.description]])]),e("div",wt,[e("button",{type:"submit",class:"btn btn-primary w-100",disabled:Object.keys(p).length>0},"儲存",8,Mt)])]),_:1},512)],64)):z("",!0)])}}}),Tt=e("div",{class:"bg-danger p-3 d-flex justify-content-between rounded-top"},[e("h3",{class:"text-white h4 mb-0"},"刪除紀錄"),e("div",null,[e("button",{type:"button",class:"btn-close btn-light","data-bs-dismiss":"modal","aria-label":"Close"})])],-1),At={class:"p-4"},Ft=e("p",null,"是否確認刪除此筆記錄？",-1),Nt={class:"h6"},Ot={class:"text-danger"},qt={class:"h6"},Lt={class:"text-danger"},Ht={class:"h6"},Pt={class:"text-danger"},jt=j({__name:"DeleteSpending",props:{updateExpense:null,expenseOrIncome:null},emits:["closeModal"],setup(b,{emit:v}){const y=b,f=J(),{updateExpense:m}=Y(y),n=async()=>{try{const s=`/expenses/${m.value.id}?_noRemoveDependents=true`,x=await N.delete(s);console.log(x),E.fire({icon:"success",title:"成功刪除",confirmButtonColor:"#7fbcd2"}),v("closeModal"),f.getExpense()}catch{E.fire({icon:"error",title:"刪除失敗，請再次操作或連繫管理員",confirmButtonColor:"#cb7d56"})}};return(s,x)=>{var $;return l(),c(I,null,[Tt,e("div",At,[Ft,e("p",Nt,[T("名稱："),e("span",Ot,r(o(m).name),1)]),e("p",qt,[T("銀行帳戶："),e("span",Lt,r(($=o(m).personalBankAccount)==null?void 0:$.bankName),1)]),e("p",Ht,[T("金額："),e("span",Pt,r(o(m).amount),1)]),e("div",{class:"text-end"},[e("button",{type:"button",class:"btn btn-danger w-25",onClick:n},"刪除")])])],64)}}}),Jt={class:"container my-5"},Rt=e("h2",{class:"mb-5"},"當月收支記錄",-1),zt={class:"list-unstyled mb-3 rounded-4 shadow-sm bg-light"},Yt={class:"row"},Gt={class:"col-md-4 mb-3"},Kt={class:"px-5 py-4"},Qt=e("h5",null,"當月總額",-1),Wt={class:"text-center h4 text-primary"},Xt={class:"col-md-4 mb-3"},Zt={class:"px-5 py-4"},eo=e("h5",null,"當月收入",-1),to={class:"text-center h4 text-success"},oo={class:"col-md-4"},so={class:"px-5 py-4"},no=e("h5",null,"當月支出",-1),ao={class:"text-center h4 text-danger"},lo={class:"row"},co={class:"col-md-6 mb-5"},io={class:"min-vh-80 max-vh-80 overflow-auto shadow-sm p-4 rounded-4 bg-light d-flex align-items-center"},ro={class:"col-md-6"},uo={class:"bg-light shadow-sm rounded-3 p-4 min-vh-80 max-vh-80 overflow-auto"},mo={class:"btn-group text-end mb-3",role:"group","aria-label":"Basic outlined example"},po={class:"d-flex justify-content-between"},_o={class:"h5"},bo={class:"d-flex"},ho={key:0,class:"text-danger me-5"},vo={key:1,class:"text-danger me-3"},fo={key:0,class:"text-success"},yo={key:1,class:"text-success"},go={class:"mt-3"},xo={class:"table"},$o=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"類別"),e("th",{scope:"col"},"名稱"),e("th",{scope:"col",class:"text-end"},"金額"),e("th",{scope:"col",class:"text-end"},"修改")])],-1),Io={class:"text-end"},ko={class:"text-danger"},Vo=e("br",null,null,-1),So={class:"h6 mb-0 badge-outline-primary"},Co={class:"text-end"},Do=["onClick"],Bo=e("span",{class:"material-icons-outlined text-secondary btn-hover"},"edit",-1),Eo=[Bo],wo=["onClick"],Mo=e("span",{class:"material-icons-outlined text-secondary btn-hover"},"delete_forever",-1),Uo=[Mo],To={class:"text-end"},Ao={class:"text-success"},Fo=e("br",null,null,-1),No={class:"h6 mb-0 badge-outline-primary"},Oo={class:"text-end"},qo=["onClick"],Lo=e("span",{class:"material-icons-outlined text-secondary btn-hover"},"edit",-1),Ho=[Lo],Po=["onClick"],jo=e("span",{class:"material-icons-outlined text-secondary btn-hover"},"delete_forever",-1),Jo=[jo],Qo=j({__name:"RecordExpense",setup(b){const v=V({uuid:K(),dateTime:new Date,date:"",name:"",amount:"",description:"",expenseCategoryId:0,personalBankAccountId:0,userId:""}),y=J(),f=G(),m=ee();P(()=>{y.getExpense(),y.getIncomeList(),f.getBankAccountList()});const n=V(),s=V(""),x=V(""),$=(t,u,F)=>{s.value=t,F&&(x.value=F),t==="editSpending"||t==="deleteSpending"?(v.value=JSON.parse(JSON.stringify(u)),y.updateIncomeData=JSON.parse(JSON.stringify(u))):t==="single"&&(v.value={uuid:K(),dateTime:new Date,date:"",name:"",amount:"",description:"",expenseCategoryId:0,personalBankAccountId:0,userId:""}),n.value.openModalInComponent()},M=()=>{n.value.closeModalInComponent()},U=V([{label:"today",highlight:{color:"blue"},dates:new Date}]),d=V(new Date),a=L(()=>{const t=d.value,u=t.getFullYear(),F=String(t.getMonth()+1).padStart(2,"0"),_=String(t.getDate()).padStart(2,"0");return`${u}-${F}-${_}`}),h=L(()=>y.expenseList.filter(t=>t.date===a.value)),k=L(()=>y.incomeList.filter(t=>t.date===a.value)),A=L(()=>{let t=0;return h.value.forEach(u=>{t+=Number(u.amount)}),t}),p=L(()=>{let t=0;return k.value.forEach(u=>{t+=Number(u.amount)}),t});return(t,u)=>{const F=w("VDatePicker");return l(),c("div",Jt,[Rt,e("ul",zt,[e("template",Yt,[e("li",Gt,[e("div",Kt,[Qt,e("p",Wt,r(t.$toThousandth(o(m).calculateMonthTotal)),1)])]),e("li",Xt,[e("div",Zt,[eo,e("p",to,r(t.$toThousandth(o(m).incomeMonthTotal)),1)])]),e("li",oo,[e("div",so,[no,e("p",ao,r(t.$toThousandth(o(m).expenseMonthTotal)),1)])])])]),e("div",lo,[e("div",co,[e("div",io,[i(F,{borderless:"",transparent:"",expanded:"",modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=_=>d.value=_),attributes:U.value,mode:"single",class:"custom-selected"},null,8,["modelValue","attributes"])])]),e("div",ro,[e("div",uo,[e("div",mo,[e("button",{type:"button",class:"btn btn-outline-primary",onClick:u[1]||(u[1]=_=>$("single"))},"+ 記錄單筆")]),e("div",po,[e("p",_o,r(o(a)),1),e("div",bo,[e("div",null,[o(h)?(l(),c("p",ho,"$ "+r(t.$toThousandth(o(A))),1)):(l(),c("p",vo,"$ 0"))]),e("div",null,[o(k)?(l(),c("p",fo,"$ "+r(t.$toThousandth(o(p))),1)):(l(),c("p",yo,"$ 0"))])])]),e("div",go,[e("table",xo,[$o,e("tbody",null,[(l(!0),c(I,null,B(o(h),_=>{var O,q;return l(),c("tr",{key:_.uuid,role:"button",class:"tr-hover"},[e("td",null,r((O=_.expenseCategory)==null?void 0:O.name),1),e("td",null,r(_.name),1),e("td",Io,[e("span",ko," $ "+r(t.$toThousandth(_.amount)),1),T(),Vo,e("span",So,r((q=_.personalBankAccount)==null?void 0:q.bankName),1)]),e("td",null,[e("div",Co,[e("button",{type:"button",class:"me-2 btn-hover p-0",onClick:R=>$("editSpending",_,"expense")},Eo,8,Do),e("button",{type:"button",class:"btn-hover p-0",onClick:R=>$("deleteSpending",_,"expense")},Uo,8,wo)])])])}),128)),(l(!0),c(I,null,B(o(k),_=>{var O,q;return l(),c("tr",{key:_.uuid,role:"button",class:"tr-hover"},[e("td",null,r((O=_.incomeCategory)==null?void 0:O.name),1),e("td",null,r(_.name),1),e("td",To,[e("span",Ao," $ "+r(t.$toThousandth(_.amount)),1),T(),Fo,e("span",No,r((q=_.personalBankAccount)==null?void 0:q.bankName),1)]),e("td",null,[e("div",Oo,[e("button",{type:"button",class:"me-2 btn-hover p-0",onClick:R=>$("editSpending",_,"income")},Ho,8,qo),e("button",{type:"button",class:"btn-hover p-0",onClick:R=>$("deleteSpending",_,"income")},Jo,8,Po)])])])}),128))])])])]),i(X,{ref_key:"modalShare",ref:n},{"record-spending":g(()=>[s.value==="single"?(l(),H(Re,{key:0,"update-expense":v.value,onCloseModal:M},null,8,["update-expense"])):s.value==="multiple"?(l(),H(se,{key:1})):z("",!0)]),"record-assets":g(()=>[s.value==="editSpending"?(l(),H(Ut,{key:0,"update-expense":v.value,"expense-or-income":x.value,onCloseModal:M},null,8,["update-expense","expense-or-income"])):s.value==="deleteSpending"?(l(),H(jt,{key:1,"update-expense":v.value,"expense-or-income":x.value,onCloseModal:M},null,8,["update-expense","expense-or-income"])):z("",!0)]),_:1},512)])])])}}});export{Qo as default};
